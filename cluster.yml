---

- hosts: "cluster-network"
  roles: [ "cluster-network" ]
  tags: "cluster-network"

- hosts: "cluster-admin"
  roles: [ "cluster-admin" ]
  tags: "cluster-admin"

- hosts: "cluster-jenkins"
  roles:

    - role: "cluster-jenkins"
      when: "cluster == 'ops'"

    - role: "install-nodejs"
      when: "cluster == 'ops'"

    - role: "install-iojs"
      when: "cluster == 'ops'"

    - role: "setup-alternatives"
      when: "cluster == 'ops'"

  tags:
    - "cluster-jenkins"

- hosts: "cluster-app"
  roles:

    - role: "cluster-app"
      when: "cluster != 'ops'"

  tags:
    - "cluster-app"

# ----- icinga

- hosts: "cluster-admin"
  roles: [ "cluster-icinga" ]
  tags: "cluster-icinga"

- hosts: "cluster-app"
  roles:
    - role: "cluster-icinga"
      when: "cluster != 'ops'"
  tags: "cluster-icinga"

# ex: et ts=2 filetype=yaml
