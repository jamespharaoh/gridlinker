---

- hosts: "cluster-app"
  roles:

    # ----- production

    - role: "cluster-deployment-alias"
      cluster_deployment_alias_name: "production"
      when: "cluster == 'production'"
      tags: [ "cluster-deployment-alias", "production" ]

    - role: "cluster-deployment"
      cluster_deployment_name: "production-a"
      when: "cluster == 'production'"
      tags: [ "cluster-deployment", "production-a" ]

    - role: "cluster-deployment"
      cluster_deployment_name: "production-b"
      when: "cluster == 'production'"
      tags: [ "cluster-deployment", "production-b" ]

    # ----- staging

    - role: "cluster-deployment-alias"
      cluster_deployment_alias_name: "staging"
      when: "cluster == 'staging'"
      tags: [ "cluster-deployment-alias", "staging" ]

    - role: "cluster-deployment"
      cluster_deployment_name: "staging-a"
      when: "cluster == 'staging'"
      tags: [ "cluster-deployment", "staging-a" ]

    - role: "cluster-deployment"
      cluster_deployment_name: "staging-b"
      when: "cluster == 'staging'"
      tags: [ "cluster-deployment", "staging-b" ]

    # ----- test

    - role: "cluster-deployment"
      cluster_deployment_name: "test-everest"
      when: "cluster == 'test'"
      tags: [ "cluster-deployment", "test-everest" ]

    - role: "cluster-deployment"
      cluster_deployment_name: "test-k2"
      when: "cluster == 'test'"
      tags: [ "cluster-deployment", "test-k2" ]

    - role: "cluster-deployment"
      cluster_deployment_name: "test-montblanc"
      when: "cluster == 'test'"
      tags: [ "cluster-deployment", "test-montblanc" ]

# ex: et ts=2 filetype=yaml
