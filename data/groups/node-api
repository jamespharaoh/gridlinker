---

my_system_packages:

  - name: "build-essential"
    state: "present"

  - name: "graphicsmagick"
    state: "present"

  - name: "imagemagick"
    state: "present"

  - name: "iptables"
    state: "present"

  - name: "libav-tools"
    state: "present"

nodejs_packages: []

#  - name: "node-gyp"
#    version: "3.2.1"
#
#  - name: "node-inspector"
#    version: "0.12.5"

#network_route_localnet: "{{
#  [ 'eth0' ] if dev_debug | default ('no') == 'yes' else []
#}}"

node_deploy_projects:

  - name: "wistla-api"
    type: "nodejs"
    nodejs_main: "server.js"
    nodejs_interpreter: "node --harmony"
    nodejs_debug: "node-debug --nodejs --debug-brk=0 --harmony"
    excludes:

      - "/config/config.local.js"
      - "/config/config.overrides.js"
      - "/config/google-service-account.key"
      - "/config/apple-ca.cert"
      - "/config/apple-push.cert"
      - "/config/apple-push.key"

    configs:

      - target: "apple-ca.cert"
        source: "apple-ca.cert"

      - target: "apple-push.cert"
        source: "apple-push.cert"

      - target: "apple-push.key"
        source: "apple-push.key"

      - target: "config.local.js"
        source: "config.local.js"

      - target: "config.overrides.js"
        source: "config.overrides.js"

      - target: "google-service-account.key"
        source: "google-service-account.key"

  - name: "content-common"
    type: "content"

  - name: "wistla-analytics"
    type: "nodejs"

nodejs_version: "{{ deployment.nodejs_version_legacy }}"

# ex: et ts=2 filetype=yaml
