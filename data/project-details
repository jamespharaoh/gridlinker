---

- name: "api-stub-server"
  build_steps:

    - "npm install"

- name: "content-browser"

- name: "content-iOS"

- name: "content-api"

- name: "content-common"

- name: "content-web"

# description: extracts data from mongo into individual json files per postgres
# db table
- name: "wistla-data-export"

# description: reads files exported using wistla-data-export and imports them
# into postgres
- name: "wistla-data-import"

# description: lower level module that handles connecting to mongo/postgres
# used_by:
# - wistla-data-export
# - wistla-data-import
# - wistla-data-process
- name: "wistla-db"

# description: the postgres db schema and helper scripts to import/export and
# assemble/split the schema
- name: "wistla-db-schema"

# description: the wistla v2 API defined in RAML 1.0 format
# used_by:
# - wistla-api-server
# - wistla-data-process
- name: "wistla-raml-api"

# description: module to generate API endpoints and HTTP server(s) based on the
# JSON generated by wistla-raml-to-api
# used_by:
# - wistla-api-server
- name: "wistla-raml-server"

# description: module to convert RAML 1.0 markup into JSON that can be used to
# generate API endpoints and HTTP server(s); as well as the data transforms
# used_by:
# - wistla-data-process
# - wistla-raml-server
- name: "wistla-raml-to-api"

- name: "wistla-admin"

- name: "wistla-analytics"
  build_steps:

    - "npm install"

- name: "wistla-api"
  nodejs_version: "legacy"
  project_links:

    - link: "node_modules/wistla-analytics"
      overlay: "node_modules/.wistla-analytics"
      target: "{{ deployment_home }}/wistla-analytics"

  build_steps:

    - "npm install"

# description: 
- name: "wistla-api-server"
  build_steps:

    - "npm install"

- name: "wistla-browser"
  nodejs_version: "legacy"
  project_links:

    - link: "node_modules/wistla-analytics"
      overlay: "node_modules/.wistla-analytics"
      target: "{{ deployment_home }}/wistla-analytics"

  build_steps:

    - "npm install"

# description: module used to read data from postgres and transform it into the
# correct http response formats
# used_by:
# - wistla-api-server
- name: "wistla-data-process"
  build_steps:

    - "npm install"

- name: "wistla-devops"
  configs:

    - "config"
    - "data/runtime"
    - "security"

- name: "wistla-iOS"

- name: "wistla-scripts"

- name: "wistla-web"
  nodejs_version: "legacy"
  build_steps:

    - "npm install"

- name: "wistla-test-images"

# ex: et ts=2 filetype=yaml
