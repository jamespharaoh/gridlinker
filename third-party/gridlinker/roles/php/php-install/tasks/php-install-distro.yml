---

- name: "install php packages"
  with_items: "{{ php_install_packages }}"
  become: "yes"
  action:

    module: "apt"
    name: "{{ item }}"

- name: "set php.state to 'installed'"
  when: "php_state == ''"
  update_resource:

    php.state: "installed"

- name: "set php.installed_version"
  when: "php_installed_version != php_version"
  update_resource:

    php.installed_version: "{{ php_version }}"

- name: "set php.installed_from"
  when: "php_installed_from != 'distro'"
  update_resource:

    php.installed_from: "distro"

- name: "set php.installed_service"
  when: "php_installed_service != 'php5-fpm'"
  update_resource:

    php.installed_service: "php5-fpm"

- name: "set php.fpm_socket"
  when: "php_fpm_socket != '/var/run/php5-fpm.sock'"
  update_resource:

    php.fpm_socket: "/var/run/php5-fpm.sock"

# ex: et ts=2 filetype=yaml
