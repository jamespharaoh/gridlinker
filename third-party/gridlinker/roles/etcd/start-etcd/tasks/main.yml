---

- name: "set etcd state to 'starting'"
  when: "etcd_state == 'stopped'"
  update_resource:
    etcd.state: "starting"
  tags: [ "etcd", "start-etcd" ]

- include: "start-etcd.yml"
  tags: [ "etcd", "start-etcd" ]

- name: "set etcd state to 'running'"
  when: "etcd_state == 'starting'"
  update_resource:
    etcd.state: "running"
  tags: [ "etcd", "start-etcd" ]

# ex: et ts=2 filetype=yaml
