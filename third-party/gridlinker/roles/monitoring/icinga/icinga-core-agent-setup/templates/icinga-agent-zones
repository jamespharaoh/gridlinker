{{ ansible_warning ['#'] }}

object Zone "master" {
	endpoints = [
{% for master in icinga_core_masters | values %}
		"{{ master.name }}",
{% endfor %}
	]
}

{% for master in icinga_core_masters | values %}

object Endpoint "{{ master.name }}" {
	host = "{{ master.host }}"
}

{% endfor %}

object Zone "{{ icinga_core_endpoint_name }}" {
	endpoints = [ "{{ icinga_core_endpoint_name }}" ]
	parent = "master"
}

object Endpoint "{{ icinga_core_endpoint_name }}" {
	host = "{{ icinga_core_endpoint_host }}"
}

# ex: noet ts=4 filetype=icinga2
