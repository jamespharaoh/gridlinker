---

- name: "install web server packages"
  with_items:

   - "apache2"
   - "apachetop"
   - "libapache2-mod-fcgid"
   - "gettext"
   - "php5"
   - "php5-cli"
   - "php5-curl"
   - "php5-fpm"
   - "php5-gd"
   - "php5-mcrypt"
   - "php5-memcache"
   - "php5-memcached"
   - "php5-pgsql"
   - "php5-intl"
   - "php-gettext"

  action:

    module: "apt"
    name: "{{ item }}"

- name: "create service dir"
  with_items:

    - "apache"
    - "php-fpm"

  sudo: "yes"
  action:

    module: "file"
    path: "/etc/service/{{ item }}"
    state: "directory"

- name: "create service script"
  with_items:

    - "apache"
    - "php-fpm"

  sudo: "yes"
  action:

    module: "template"
    dest: "/etc/service/{{ item }}/run"
    src: "{{ item }}-service"

    mode: "0755"

# ex: et ts=2 filetype=yaml
