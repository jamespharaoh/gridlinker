{{ ansible_warning ['//'] }}

object Zone "common" {
	global = true
}

# ==================== cluster ops

object Zone "wistla-ops-admin" {
	endpoints = [
		"wistla-ops-admin-a",
		"wistla-ops-admin-b",
		"wistla-ops-admin-c",
	]
}

object Endpoint "wistla-ops-admin-a" {
{% if cluster_name == 'ops' %}
	host = "wistla-ops-admin-a"
{% else %}
	host = "a.admin.ops.wistla.com"
{% endif %}
}

object Endpoint "wistla-ops-admin-b" {
{% if cluster_name == 'ops' %}
	host = "wistla-ops-admin-b"
{% else %}
	host = "b.admin.ops.wistla.com"
{% endif %}
}

object Endpoint "wistla-ops-admin-c" {
{% if cluster_name == 'ops' %}
	host = "wistla-ops-admin-c"
{% else %}
	host = "c.admin.ops.wistla.com"
{% endif %}
}

{% if cluster_name != 'ops' %}

# ==================== cluster {{ cluster_name }}

object Zone "wistla-{{ cluster_name }}-admin" {
	endpoints = [
		"wistla-{{ cluster_name }}-admin-a",
		"wistla-{{ cluster_name }}-admin-b",
		"wistla-{{ cluster_name }}-admin-c",
	]
	parent = "wistla-ops-admin"
}

object Endpoint "wistla-{{ cluster_name }}-admin-a" {
	host = "wistla-{{ cluster_name }}-admin-a"
}

object Endpoint "wistla-{{ cluster_name }}-admin-b" {
	host = "wistla-{{ cluster_name }}-admin-b"
}

object Endpoint "wistla-{{ cluster_name }}-admin-c" {
	host = "wistla-{{ cluster_name }}-admin-c"
}

{% endif %}

# ==================== this host

object Zone "{{ inventory_hostname }}" {
	endpoints = [ "{{ inventory_hostname }}" ]
	parent = "wistla-{{ cluster_name }}-admin"
}

object Endpoint "{{ inventory_hostname }}" {
	host = "{{ inventory_hostname }}"
}
