---

- hosts: "cluster-app"
  roles:

    - role: "nodejs-install"
      nodejs_version: "{{ nodejs_version_regular }}"

    - role: "nodejs-packages-install"
      nodejs_version: "{{ nodejs_version_regular }}"

    - role: "nodejs-install"
      when: "
        nodejs_version_legacy != ''
        and nodejs_version_legacy != nodejs_version_regular
      "
      nodejs_version: "{{ nodejs_version_legacy }}"

    - role: "nodejs-packages-install"
      when: "
        nodejs_version_legacy != ''
        and nodejs_version_legacy != nodejs_version_regular
      "
      nodejs_version: "{{ nodejs_version_regular }}"
      nodejs_packages: "{{ nodejs_packages_legacy }}"

    - "nodejs-stubs"

# ex: et ts=2 filetype=yaml
