---

# ==================== icinga

- hosts:

    - "cluster-admin"
    - "cluster-app"
    - "cluster-data"
    - "cluster-jenkins"

  roles:

    - "install-icinga"
    - "install-wistla-icinga-plugins"

- hosts: "cluster-ops-network"
  roles:

    - "setup-icinga-database"

- hosts: "wistla-ops-admin-a"
  roles:

    - "setup-wistla-icinga-master"
    - "control-icinga"

- hosts:

    - "cluster-admin:!wistla-ops-admin-a"
    - "cluster-app"
    - "cluster-data"
    - "cluster-jenkins"

  roles:

    - "setup-wistla-icinga-agent"
    - "control-icinga"

# ==================== icinga web

- hosts: "cluster-ops-admin"
  roles:

    - "install-icinga-web"

- hosts: "cluster-ops-network"
  roles:

    - "setup-icinga-web-database"

- hosts: "cluster-ops-admin"
  roles:

    - "setup-wistla-icinga-web"
    - "control-icinga-web"

# ex: et ts=2 filetype=yaml
