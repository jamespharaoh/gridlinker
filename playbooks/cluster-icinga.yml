---

# ==================== icinga

- hosts:

    - "cluster-admin"
    - "cluster-app"
    - "cluster-jenkins"

  roles:

    - "install-icinga"

- hosts: "cluster-ops-network"
  roles:

    - "setup-icinga-database"

- hosts: "cluster-ops-admin"
  serial: "1"
  roles:

    - "setup-wistla-icinga-master"
    - "control-icinga"

- hosts:

    - "cluster-production-admin"
    - "cluster-staging-admin"
    - "cluster-test-admin"

  serial: "1"
  roles:

    - "setup-wistla-icinga-slave"
    - "control-icinga"

- hosts:

    - "cluster-app"
    - "cluster-jenkins"

  serial: "1"
  roles:

    - "setup-wistla-icinga-agent"
    - "control-icinga"

# ==================== icinga web

- hosts: "cluster-ops-admin"
  roles:

    - "install-icinga-web"

- hosts: "cluster-ops-network"
  roles:

    - "setup-icinga-web-database"

- hosts: "cluster-ops-admin"
  roles:

    - "setup-wistla-icinga-web"
    - "control-icinga-web"

# ex: et ts=2 filetype=yaml
