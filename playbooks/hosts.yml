---

- hosts: "rocket-hz-host"
  roles:

    - "wait-for-ssh"
    - "scan-ssh-key"

    - role: "setup-authorized-keys"
      tags: "setup-authorized-keys"
      authorized_keys_user: "root"
      authorized_keys_home: "/root"

    - role: "install-system-packages"
      tags: "install-system-packages"

    - role: "setup-network"
      tags: "setup-network"

    - role: "setup-hosts"
      tags: "setup-hosts"

    - role: "setup-sysctl"
      tags: "setup-sysctl"

    - role: "install-dnsmasq"
      tags: "install-dnsmasq"

    - role: "install-kvm"
      tags: "install-kvm"

    - role: "install-openvpn"
      tags: "install-openvpn"

- hosts: "rocket-hz-vm"
  roles:

    - "wait-for-ssh"
    - "scan-ssh-key"

    - role: "setup-authorized-keys"
      tags: "setup-authorized-keys"
      authorized_keys_user: "root"
      authorized_keys_home: "/root"

    - role: "setup-authorized-keys"
      tags: "setup-authorized-keys"
      authorized_keys_user: "ubuntu"
      authorized_keys_home: "/home/ubuntu"

    - role: "install-system-packages"
      tags: "install-system-packages"

    - role: "setup-grub-vm"
      tags: "setup-grub-vm"

    - role: "setup-network"
      tags: "setup-network"

    - role: "setup-hosts"
      tags: "setup-hosts"

    - role: "install-dnsmasq"
      tags: "install-dnsmasq"

    - role: "install-postfix"
      tags: "install-postfix"

    - role: "install-docker"
      tags: "install-docker"

    - role: "install-lxc"
      tags: "install-lxc"

    - role: "install-nfs-server"
      tags: "install-nfs-server"

    - role: "setup-datingnode-vm"
      tags: "setup-datingnode-vm"

- hosts: "rocket-hz-lxc"
  roles:

    - role: "lxc-create"
      tags: "lxc-create"

    - role: "install-system-packages"
      tags: "install-system-packages"

    - role: "setup-hosts"
      tags: "setup-hosts"

# ex: et ts=2 filetype=yaml
