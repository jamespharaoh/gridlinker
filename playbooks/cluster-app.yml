---

- include: "cluster-app/cluster-app-create.yml"
- include: "cluster-app/cluster-app-system.yml"
- include: "cluster-app/cluster-app-setup-dns.yml"

- hosts: "cluster-app"
  roles:

    - "system-apt-setup"
    - "setup-common-users"
    - "setup-hostname"
    - "setup-system"
    - "setup-logging"
    - "cluster-ssh"
    - "system-packages-install"
    - "install-kernel"
    - "install-postfix"
    - "cluster-volumes"
    - "cluster-user"

- include: "cluster-app/cluster-app-heka.yml"
- include: "cluster-app/cluster-app-python.yml"
- include: "cluster-app/cluster-app-network.yml"
- include: "cluster-app/cluster-app-mongodb.yml"
- include: "cluster-app/cluster-app-tools.yml"
- include: "cluster-app/cluster-app-nodejs.yml"
- include: "cluster-app/cluster-app-nginx.yml"
- include: "cluster-app/cluster-app-lxc.yml"
- include: "cluster-app/cluster-app-cron.yml"
- include: "cluster-app/cluster-app-rzbackup.yml"
- include: "cluster-app/cluster-app-btrfs-dedupe.yml"
- include: "cluster-app/cluster-app-activate.yml"

# ex: et ts=2 filetype=yaml
