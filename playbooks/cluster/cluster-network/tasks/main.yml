---

- include: "cluster-setup.yml"
  tags:

    - "cluster"
    - "cluster-network"
    - "cluster-network-setup"

# ---------- vpc

- include: "cluster-vpc.yml"
  tags:

    - "cluster"
    - "cluster-network-vpc"
    - "cluster-network-vpc"

- include: "cluster-admin-subnet.yml"
  tags:

    - "cluster"
    - "cluster-network"
    - "cluster-network-admin-subnet"

- include: "cluster-data-subnet.yml"
  when: "cluster_name != 'ops'"
  tags:

    - "cluster"
    - "cluster-network"
    - "cluster-network-data-subnet"

- include: "cluster-app-subnet.yml"
  when: "cluster_name != 'ops'"
  tags:

    - "cluster"
    - "cluster-network"
    - "cluster-network-app-subnet"

- include: "cluster-jenkins-subnet.yml"
  when: "cluster_name == 'ops'"
  tags:

    - "cluster"
    - "cluster-network"
    - "cluster-network-jenkins-subnet"

- include: "cluster-security-groups.yml"
  tags:

    - "cluster"
    - "cluster-network"
    - "cluster-network-security-groups"

# ---------- balancers

- include: "cluster-app-balancer.yml"
  when: "cluster_name != 'ops'"
  tags:

    - "cluster"
    - "cluster-network"
    - "cluster-network-app-balancer"

- include: "cluster-admin-balancer.yml"
  tags:

    - "cluster"
    - "cluster-network"
    - "cluster-network-admin-balancer"

# ex: et ts=2 filetype=yaml
