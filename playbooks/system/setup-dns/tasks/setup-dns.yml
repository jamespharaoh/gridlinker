---

- name: "create hosts file"
  notify: "restart dnsmasq"
  become: "yes"
  action:

    module: "template"
    dest: "/etc/hosts"
    src: "dns-hosts"

- name: "install dnsmasq packages"
  with_items:

    - "dnsmasq"

  become: "yes"
  action:

    module: "apt"
    name: "{{ item }}"

- name: "create dnsmasq config"
  notify: "restart dnsmasq"
  become: "yes"
  action:

    module: "template"
    dest: "/etc/dnsmasq.conf"
    src: "dns-dnsmasq-config"

- name: "create dnsmasq default"
  notify: "restart dnsmasq"
  become: "yes"
  action:

    module: "template"
    dest: "/etc/default/dnsmasq"
    src: "dns-dnsmasq-default"

- meta: "flush_handlers"

# ex: et ts=2 filetype=yaml
