{{ ansible_warning ['//'] }}

var ROOT = process.cwd ();
var config = require(ROOT + '/config/config.global');

// public urls
config.adminUrl = 'https://{{ deployment.admin_domain }}';
config.apiUrl = 'https://{{ deployment.api_domain }}';
config.assetsUrl = 'https://{{ deployment.assets_domain }}';
config.shortUrl = 'https://{{ deployment.short_domain }}';
config.webUrl = 'https://{{ deployment.web_domain }}';

// private urls
config.apiPrivate = 'http://{{ deployment_name }}-api-0:7000';

// email
config.emailDomain = '{{ deployment.email_domain }}';

// Database.
config.dbUrl = 'mongodb://{{ deployment_name }}-mongo-0:27017/wistla-browser';

// Deep link url scheme for use in sending out emails.
{% if 'dev' in third_parties %}
config.urlScheme = '{{ third_parties.dev.url_scheme }}';
{% else %}
config.urlScheme = '';
{% endif %}

// facebook app configuration options
{% if 'dev' in third_parties %}
config.facebook.appId = '{{ third_parties.dev.facebook_app_id }}';
{% else %}
config.facebook.appId = '';
{% endif %}

// facebook app configuration options
{% if 'dev' in third_parties %}
// android config
config.android = {
	appId: '{{ third_parties.dev.android_app_id }}',
	appStoreUrlWeb: 'https://play.google.com/store/apps/details?id={{ third_parties.dev.android_app_id }}',
	appStoreUrlMobile: 'market://details?id={{ third_parties.dev.android_app_id }}'
};
{% endif %}

if (!config.authentication || typeof config.authentication !== 'object') {
        config.authentication = {};
}
if (!config.authentication.google || typeof config.authentication.google !== 'object') {
        config.authentication.google = {};
}
{% if deployment.google_project in google_projects %}
{% set google_project = google_projects [deployment.google_project] %}
config.authentication.google.name = '{{ google_project.auth_name }}';
config.authentication.google.api_key = '{{ google_project.auth_api_key }}';
config.authentication.google.client_id = '{{ google_project.auth_client_id }}';
config.authentication.google.client_secret = '{{ google_project.auth_client_secret }}';
{% else %}
config.authentication.google.name = '';
config.authentication.google.client_id = '';
config.authentication.google.client_secret = '';
{% endif %}

module.exports = config;

// ex: noet ts=4 filetype=javascript
