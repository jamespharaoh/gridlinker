---

devenv_config_directories:

  - "config"
  - "config/api"
  - "config/browser"
  - "config/load"
  - "config/mongo"
  - "config/rabbit"
  - "config/web"

devenv_config_files:

  - source: "{{ HOME }}/security/apple/push-notifications/ca.cert"
    type: "api"
    target: "apple-ca.cert"

  - source: "{{ HOME }}/security/apple/push-notifications/{{ dev_apple_push_notifications_name | default ('null') }}.cert"
    type: "api"
    target: "apple-push.cert"

devenv_config_secrets:

  - source: "{{ HOME }}/security/test/google-service-account.key"
    type: "api"
    target: "google-service-account.key"

  - source: "{{ HOME }}/security/apple/push-notifications/{{ dev_apple_push_notifications_name | default ('null') }}.key"
    type: "api"
    target: "apple-push.key"

devenv_config_templates:

  - template: "devenv-wistla-admin-config"
    type: "load"
    target: "wistla-admin-config.local.js"

  - template: "devenv-wistla-api-config"
    type: "api"
    target: "config.local.js"

  - template: "devenv-wistla-api-environment"
    type: "api"
    target: "environment"

  - template: "devenv-wistla-browser-config"
    type: "browser"
    target: "config.local.js"

  - template: "devenv-wistla-browser-environment"
    type: "browser"
    target: "environment"

  - template: "devenv-wistla-rabbit-erlang-cookie"
    type: "rabbit"
    target: "erlang-cookie"
    owner: "rabbitmq"
    group: "root"
    mode: "0400"

  - template: "devenv-wistla-web-config"
    type: "web"
    target: "config.local.js"

  - template: "devenv-wistla-web-environment"
    type: "web"
    target: "environment"

  - template: "devenv-wistla-load-nginx-config"
    type: "load"
    target: "nginx-config"

devenv_config_links:

  - src: "../../config/api/apple-ca.cert"
    dest: "wistla-api/config/apple-ca.cert"

  - src: "../../config/api/apple-push.cert"
    dest: "wistla-api/config/apple-push.cert"

  - src: "../../config/api/apple-push.key"
    dest: "wistla-api/config/apple-push.key"

  - src: "../../config/api/config.local.js"
    dest: "wistla-api/config/config.local.js"

  - src: "../../config/api/config.overrides.js"
    dest: "wistla-api/config/config.overrides.js"

  - src: "../../config/api/google-service-account.key"
    dest: "wistla-api/config/google-service-account.key"

  - src: "../../config/browser/config.local.js"
    dest: "wistla-browser/config/config.local.js"

  - src: "../../config/browser/config.overrides.js"
    dest: "wistla-browser/config/config.overrides.js"

  - src: "../../config/load/wistla-admin-config.local.js"
    dest: "wistla-admin/config/config.local.js"

  - src: "../../config/web/config.local.js"
    dest: "wistla-web/config/config.local.js"

  - src: "../../config/web/config.overrides.js"
    dest: "wistla-web/config/config.overrides.js"

devenv_shared_directories:

  - "shared"
  - "shared/audio"
  - "shared/cms-image"
  - "shared/flags"
  - "shared/image"
  - "shared/log"
  - "shared/user-upload"
  - "shared/video"

devenv_override_templates:

  - template: "devenv-wistla-api-overrides"
    target: "config/api/config.overrides.js"

  - template: "devenv-wistla-browser-overrides"
    target: "config/browser/config.overrides.js"

  - template: "devenv-wistla-web-overrides"
    target: "config/web/config.overrides.js"

# ex: et ts=2 filetype=yaml
