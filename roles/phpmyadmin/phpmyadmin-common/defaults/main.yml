---

# ---------- state

phpmyadmin_state: ""
phpmyadmin_installed_version: ""

# ---------- installation

phpmyadmin_version: ""
phpmyadmin_mirror: "https://dist.wellbehavedsoftware.com/phpmyadmin"
phpmyadmin_temp: "/tmp/phpmyadmin-install"

phpmyadmin_directory: "phpMyAdmin-{{ phpmyadmin_version }}"
phpmyadmin_archive: "{{ phpmyadmin_directory }}.tar.xz"
phpmyadmin_url: "{{ phpmyadmin_mirror }}/{{ phpmyadmin_archive }}"

phpmyadmin_target: "/opt/phpmyadmin-{{ phpmyadmin_version }}"
phpmyadmin_config: "/opt/phpmyadmin-config"

# ----------- configuration

phpmyadmin_config_directories:

  - directory: "{{ phpmyadmin_config }}"
    user: "root"
    group: "root"
    mode: "0755"

phpmyadmin_config_templates:

  - target: "{{ phpmyadmin_config }}/config.inc.php"
    template: "phpmyadmin-config"
    user: "root"
    group: "www-data"
    mode: "0640"

  - target: "{{ phpmyadmin_config }}/apache-site.conf"
    template: "phpmyadmin-apache-site"
    user: "root"
    group: "root"
    mode: "0644"

phpmyadmin_config_links:

  - link: "{{ phpmyadmin_target }}/config.inc.php"
    target: "{{ phpmyadmin_config }}/config.inc.php"

  - link: "/etc/apache2/sites-available/phpmyadmin.conf"
    target: "{{ phpmyadmin_config }}/apache-site.conf"

# ex: et ts=2 filetype=yaml
