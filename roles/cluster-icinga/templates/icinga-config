include "constants.conf"
include "zones.conf"

include <itl>
include <plugins>

# ---------- loggers

object FileLogger "main-log" {
	severity = "information"
	path = LocalStateDir + "/log/icinga2/icinga2.log"
}

{% if true %}
object FileLogger "notice-log" {
	severity = "notice"
	path = LocalStateDir + "/log/icinga2/notice.log"
}
{% endif %}

{% if false %}
object FileLogger "debug-log" {
	severity = "debug"
	path = LocalStateDir + "/log/icinga2/debug.log"
}
{% endif %}

# ---------- api

object ApiListener "api" {

	ca_path = SysconfDir + "/icinga2/pki/wistla-icinga-ca.cert"
	cert_path = SysconfDir + "/icinga2/pki/wistla-{{ cluster }}-admin-{{ zon }}.cert"
	key_path = SysconfDir + "/icinga2/pki/wistla-{{ cluster }}-admin-{{ zon }}.key"

{% if cluster == 'ops' and zon == 'a' %}
	accept_config = false
{% else %}
	accept_config = true
{% endif %}

	accept_commands = true

}

# ---------- checker

library "checker"

object CheckerComponent "checker" { }

# ---------- compat

library "compat"

object ExternalCommandListener "command" { }
object CompatLogger "compatlog" { }
object StatusDataWriter "status" { }

# ---------- notification

library "notification"

object NotificationComponent "notification" { }
