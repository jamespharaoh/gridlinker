{{ ansible_warning ['#'] }}

127.0.0.1 localhost

{% for other_deployment_name in jenkins_deployment_names %}
{% set other_deployment = deployments [other_deployment_name] %}

# ---------- deployment {{ other_deployment_name }}

{% for host_name in groups.all if host_name in groups.node %}
{% set host = hostvars [host_name] %}
{% set host_address = [
	other_deployment.bridge_network,
	host.grp,
	host.idx,
] | join ('.') %}
{{ [
	host_address,
	other_deployment_name + '-' + host_name,
	host_name + '.' + other_deployment.main_domain,
] | join (' ') }}
{% endfor %}

{% for host_name in groups ['load-node'] %}
{% set host = hostvars [host_name] %}
{% set host_address = [
	other_deployment.bridge_network,
	host.grp,
	host.idx,
] | join ('.') %}
{{ [
	host_address,
	other_deployment.main_domain,
] | join (' ') }}
{% endfor %}

{% for subdomain in [ 'api', 'www' ] %}
{% for host_name in groups ['load-node'] %}
{% set host = hostvars [host_name] %}
{% set host_address = [
	other_deployment.bridge_network,
	host.grp,
	host.idx,
] | join ('.') %}
{{ [
	host_address,
	subdomain + '.' + other_deployment.main_domain,
] | join (' ') }}
{% endfor %}
{% endfor %}

{% endfor %}
