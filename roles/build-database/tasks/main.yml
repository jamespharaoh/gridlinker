---

- name: "Ubuntu: Install Postgresql & Postgis"
  sudo: yes
  apt: name={{ item }} state=present
  with_items:
   - postgresql-9.3
   - postgresql-9.3-postgis-2.1
   - postgresql-9.3-postgis-2.1-scripts
   - postgresql-client
  when: ansible_distribution == "Ubuntu"
  notify: Restart postgresql

- name: "Debian: Install Postgresql & Postgis"
  sudo: yes
  apt: name={{ item }} state=present
  with_items:
   - postgresql-9.1
   - postgresql-9.1-postgis
   - postgresql-client
  when: ansible_distribution == "Debian"
  notify: Restart postgresql

- name: "create postgresql service directory"
  action:
    module: "file"
    path: "/etc/service/postgresql"
    state: "directory"
  sudo: "yes"

- name: "create postgresql service script"
  action:
    module: "template"
    src: "postgresql-service"
    dest: "/etc/service/postgresql/run"
    mode: "0755"
  sudo: "yes"

# ex: et ts=4 filetype=yaml
