---

- name: "create ssl directory"
  action:
    module: "file"
    name: "/datingnode-ssl"
    state: "directory"
    owner: "root"
    group: "root"
    mode: "0755"
  sudo: "yes"

- name: "create own ssl certificates"
  action:
    module: "copy"
    src: "secret-plain/ssl/{{ item.0 }}{{ item.1 }}.cert"
    dest: "/datingnode-ssl/{{ item.0 }}{{ item.1 }}.cert"
    owner: "root"
    group: "root"
    mode: "0644"
  sudo: "yes"
  with_nested:
    - "base_ssl_domains"
    - "ssl_domain_suffixes"

- name: "create own ssl keys"
  action:
    module: "copy"
    src: "secret-plain/ssl/{{ item.0 }}{{ item.1 }}.key"
    dest: "/datingnode-ssl/{{ item.0 }}{{ item.1 }}.key"
    owner: "root"
    group: "root"
    mode: "0600"
  sudo: "yes"
  with_nested:
    - "base_ssl_domains"
    - "ssl_domain_suffixes"

# ex: et ts=2 filetype=yaml
