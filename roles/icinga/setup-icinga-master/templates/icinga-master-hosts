template Host "generic-host" {

	max_check_attempts = 3
	check_interval = 1m
	retry_interval = 30s

	check_command = "hostalive"

}

{% for host_name in groups [icinga_master.endpoints] %}
{% set host = hostvars [host_name] %}

object Host "{{ host_name }}" {

	import "generic-host"

	address = "{{ host.icinga_host.address }}"

	vars.http = true

}

{% endfor %}

{% for host_name in groups [icinga_master.hosts] %}
{% set host = hostvars [host_name] %}

object Host "{{ host_name }}" {

	import "generic-host"

	address = "{{ host.icinga_host.address }}"

	vars.http = true

	vars.endpoint = "{{ host.icinga_host.endpoint }}"

}

{% endfor %}
