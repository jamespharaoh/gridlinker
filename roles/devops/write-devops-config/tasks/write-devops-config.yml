---

- name: "create main config"
  action:

    module: "template"
    src: "overrides"
    dest: "{{ HOME }}/config/overrides.yml"

- include_vars: "{{ HOME }}/config/overrides.yml"

- name: "create dependent configs"
  with_items:

    - "datingnode-config"
    - "deploy-config"

  action:

    module: "template"
    src: "{{ item }}"
    dest: "{{ HOME }}/config/{{ item }}"

- name: "create build directory"
  action:

    module: "file"
    dest: "{{ HOME }}/config/build"
    state: "directory"

- name: "create build configs"
  with_items:

    - "base"
    - "database"
    - "web-server"
    - "web-application"
    - "vhost-proxy"
    - "memcache"

  action:

    module: "template"
    dest: "{{ HOME }}/config/build/{{ item }}-build"
    src: "build-config"

# ex: et ts=2 filetype=yaml
