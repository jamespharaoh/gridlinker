---

- update_resource:
    python_state: "building"
  when: "
    python_version != 'no' and (
      python_state is not defined
      or python_installed_version is not defined
      or python_installed_version != python_version
    )
  "
  tags: [ "python", "build-python" ]

- include: "build-python.yml"
  when: "python_state == 'building'"
  tags: [ "python", "build-python" ]

- update_resource:
    python_state: "installed"
    python_installed_version: "{{ python_version }}"
  when: "python_state == 'building'"
  tags: [ "python", "build-python" ]

# ex: et ts=2 filetype=yaml
