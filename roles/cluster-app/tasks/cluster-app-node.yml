---

- name: "install node system packages"
  action:
    module: "apt"
    name: "{{ item }}"
  sudo: "yes"
  with_items:
    - "nodejs"
    - "npm"

- name: "make node command work"
  action:
    module: "alternatives"
    link: "/usr/bin/node"
    name: "node"
    path: "/usr/bin/nodejs"
  sudo: "yes"
  sudo_user: "root"

- name: "install node packages"
  action:
    module: "npm"
    name: "{{ item.name }}"
    version: "{{ item.version }}"
    global: "yes"
  sudo: "yes"
  with_items: "cluster_app_install_node"
  tags: "update"

# ex: et ts=2 filetype=yaml
