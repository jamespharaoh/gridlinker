---

- update_resource:
    icinga_web.state: "starting"
  when: "
    icinga_web_control == 'start'
    and icinga_web_state in [ 'configured', 'stopped' ]
  "

- update_resource:
    icinga_web.state: "stopping"
  when: "
    icinga_web_control == 'stop'
    and icinga_web_state in [ 'configured', 'running' ]
  "

- include: "control-icinga-web.yml"
  tags: "control-icinga-web"

- update_resource:
    icinga_web.state: "running"
  when: "icinga_web_state == 'starting'"

- update_resource:
    icinga_web.state: "stopped"
  when: "icinga_web_state == 'stopping'"

# ex: et ts=2 filetype=yaml
