---

- include: "stack-create.yml"
  stack: "{{ cluster }}-subnet-app"
  template: "subnet-stack"
  subnet: "app"

- set_fact:
    cluster_routes_app_a: "{{ stack_result.stack_outputs.RouteTableA }}"
    cluster_routes_app_b: "{{ stack_result.stack_outputs.RouteTableB }}"
    cluster_routes_app_c: "{{ stack_result.stack_outputs.RouteTableC }}"
    cluster_subnet_app_a: "{{ stack_result.stack_outputs.SubnetA }}"
    cluster_subnet_app_b: "{{ stack_result.stack_outputs.SubnetB }}"
    cluster_subnet_app_c: "{{ stack_result.stack_outputs.SubnetC }}"

- include: "save.yml"
