---

- include: "stack-create.yml"
  stack: "{{ cluster }}-subnet-jenkins"
  template: "subnet-stack"
  subnet: "jenkins"

- set_fact:
    cluster_routes_jenkins_a: "{{ stack_result.stack_outputs.RouteTableA }}"
    cluster_routes_jenkins_b: "{{ stack_result.stack_outputs.RouteTableB }}"
    cluster_routes_jenkins_c: "{{ stack_result.stack_outputs.RouteTableC }}"
    cluster_subnet_jenkins_a: "{{ stack_result.stack_outputs.SubnetA }}"
    cluster_subnet_jenkins_b: "{{ stack_result.stack_outputs.SubnetB }}"
    cluster_subnet_jenkins_c: "{{ stack_result.stack_outputs.SubnetC }}"

- include: "save.yml"
