---

- name: "checkout projects from git"
  shell:

    set -e;

    cd {{ vagrant_home }};

    git clone
      git@github.com:/wistla/{{ item.name }}
      --branch {{ item.branch }};

  args:
    creates: "{{ vagrant_home }}/{{ item.name }}"
  sudo: "yes"
  sudo_user: "{{ vagrant_user }}"
  with_items: "vagrant_checkouts"

- name: "create shared directory"
  action:
    module: "file"
    path: "{{ vagrant_home }}/shared"
    state: "directory"
  sudo: "yes"
  sudo_user: "{{ vagrant_user }}"

# ex: et ts=2 filetype=yaml
