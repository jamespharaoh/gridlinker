{{ ansible_warning ['#'] }}

# server

proto udp
port 1194
keepalive 5 20
mode server
persist-tun

# logging

status /run/openvpn/{{ identity_name }}.status
log-append /var/log/openvpn-{{ identity_name }}.log

# protocol

comp-lzo adaptive

push "comp-lzo adaptive"

# network

dev tun
topology subnet
ifconfig {{ openvpn.network }}.2 255.255.255.0
ifconfig-pool {{ openvpn.network }}.3 {{ openvpn.network }}.254

push "topology subnet"
push "route-gateway {{ openvpn.network }}.2"
push "route {{ private.network }} {{ private.netmask }} {{ openvpn.network }}.2"

# security

tls-server
dh dh1024.pem
client-to-client
ca rocket-ca.cert
cert {{ identity.name }}.cert
key {{ identity.name }}.key
persist-key

# ex: noet ts=4 filetype=openvpn
