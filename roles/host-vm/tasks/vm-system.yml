---

- name: "install system packages"
  action:
    module: "apt"
    package: "{{ item }}"
    state: "present"
  sudo: "yes"
  with_items: "install_packages"
  tags: "update"

- name: "remove system packages"
  action:
    module: "apt"
    package: "{{ item }}"
    state: "present"
  sudo: "yes"
  with_items: "remove_packages"
  tags: "update"

- name: "configure network"
  action:
    module: "template"
    src: "vm-network-interfaces"
    dest: "/etc/network/interfaces"
  sudo: "yes"
  tags: "network"

- name: "configure grub"
  action:
    module: "template"
    src: "vm-grub-default"
    dest: "/etc/default/grub"
  sudo: "yes"
  tags: "grub"
  notify: "update grub"

- name: "configure cron"
  action:
    module: "template"
    src: "vm-cron"
    dest: "/etc/cron.d/datingnode"
  sudo: "yes"
  notify: "restart cron"

- meta: "flush_handlers"

# ex: et ts=2 filetype=yaml
