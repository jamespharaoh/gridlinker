---

- name: "install docker apt key"
  action:
    module: "apt_key"
    keyserver: "hkp://keyserver.ubuntu.com:80"
    id: "36A1D7869245C8950F966E92D8576A8BA88D21E9"
  sudo: "yes"

- name: "setup docker apt repository"
  action:
    module: "apt_repository"
    repo: "deb https://get.docker.io/ubuntu docker main"
  sudo: "yes"

- name: "install docker"
  action:
    module: "apt"
    package: "lxc-docker"
    update_cache: "yes"
  sudo: "yes"

- name: "install docker python packages"
  action:
    module: "pip"
    name: "{{ item }}"
  sudo: "yes"
  with_items:
    - "docker-py"

- name: "add us to docker group"
  action:
    module: "user"
    name: "ubuntu"
    append: "yes"
    groups: "docker"
  sudo: "yes"

- name: "create docker config"
  action:
    module: "template"
    src: "docker-config"
    dest: "/home/ubuntu/.dockercfg"
