---

{{ ansible_warning ['#'] }}

db:

  database: "wistla"
  host: "{{ [
      cluster_deployment_alias.name,
      '-postgresql-main-',
      cluster.postgresql_cache_master_zone,
      '-4',
    ] | join }}"
  port: ""
  user_name: "vagrant"
  password: ""

schemas:

  - host: "{{ [
      cluster_deployment_alias.name,
      '-postgresql-main-',
      cluster.postgresql_main_master_zone,
      '-4',
    ] | join }}"
    name: "wistla"
    exclude_tables:
      - buzz_communities
      - buzz_tags
      - buzz_users
      - buzz_wistls
      - buzz_history_communities
      - buzz_history_tags
      - buzz_history_users
      - buzz_history_wistls
      - config
      - computed_table_updates_map
      - dirty_pants
      - table_weights
      - test_fixtures
      - timezones
    path: ./schema.wistla.main.sql
    publish_changes: true
    target_directory: ./schema.wistla.main
    data_import_directory: /shared

  - host: "{{ [
      cluster_deployment_alias.name,
      '-postgresql-cache-',
      cluster.postgresql_cache_master_zone,
      '-4',
    ] | join }}"
    name: "wistla"
    exclude_tables:
      - config
#      - computed_table_updates_map
#      - dirty_pants
      - table_weights
      - test_fixtures
      - timezones
    path: "./schema.wistla.cache.sql"
    target_directory: "./schema.wistla.cache"
    data_import_directory: /shared
#    map_servers:
#
#      - "{{ cluster_deployment.name }}-postgresql-main-a-4"
#
# ex: et ts=2 filetype=yaml
