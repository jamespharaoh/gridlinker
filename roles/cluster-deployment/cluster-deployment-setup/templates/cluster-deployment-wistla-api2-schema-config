---

db:

  database: "wistla"
  host: "{{ [
      cluster_deployment_alias.name,
      '-postgresql-main-',
      cluster.postgresql_cache_master_zone,
      '-4',
    ] | join }}"
  port: ""
  user_name: "vagrant"
  password: ""

schemas:

  - host: "{{ [
      cluster_deployment_alias.name,
      '-postgresql-main-',
      cluster.postgresql_cache_master_zone,
      '-4',
    ] | join }}"
    name: "wistla"
    exclude_tables:

      - "acl"
      - "config"
      - "dirty_pants"
      - "feed_search"
      - "timezones"

    path: ./schema.wistla.main.sql
    publish_changes: true
    target_directory: ./schema.wistla.main
    data_import_directory: /shared

  - host: "{{ [
      cluster_deployment_alias.name,
      '-postgresql-cache-',
      cluster.postgresql_cache_master_zone,
      '-4',
    ] | join }}"
    name: "wistla"
    exclude_tables:
      - acl
      - config
      - dirty_pants
      - feed_search
      - timezones
      - device_push_tokens
      - wistl_profile
      - user_profile
      - community_profile
      - community_activity_counts
      - user_aggregated_counts
      - user_activity_counts
      - user_communities_profile
      - user_miscellaneous_counts
      - user_notifications_profile
      - user_relationship_counts
      - user_relationships_profile
      - wistl_activity_counts
      - wistl_communities_profile
      - geo_locations
    path: "./schema.wistla.cache.sql"
    target_directory: "./schema.wistla.cache"
    data_import_directory: /shared
#    map_servers:
#
#      - "{{ cluster_deployment.name }}-postgresql-main-a-4"
#
# ex: et ts=2 filetype=yaml
