---

- name: "configure nullmailer"
  action:
    module: "debconf"
    name: "nullmailer"
    question: "{{ item.question }}"
    value: "{{ item.value }}"
    vtype: "{{ item.type }}"
  sudo: "yes"
  with_items:

    - question: "nullmailer/relayhost"
      value: "10.69.132.1"
      type: "string"

    #- question: "shared/mailname"
    #  value: "???"
    #  type: "string"

    - question: "nullmailer/defaultdomain"
      value: "rocketware.com"
      type: "string"

    - question: "nullmailer/adminaddr"
      value: ""
      type: "string"

- name: "install nullmailer packages"
  action:
    module: "apt"
    name: "{{ item }}"
  sudo: "yes"
  with_items:
    - "nullmailer"

- name: "create nullmailer service directory"
  action:
    module: "file"
    path: "/etc/service/nullmailer"
    state: "directory"
  sudo: "yes"

- name: "create nullmailer service script"
  action:
    module: "template"
    src: "nullmailer-service"
    dest: "/etc/service/nullmailer/run"
    mode: "0755"
  sudo: "yes"

# ex: et ts=2 filetype=yaml
