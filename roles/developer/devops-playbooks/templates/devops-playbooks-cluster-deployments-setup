---

{{ ansible_warning ['#'] }}

{% for cluster_deployment in deployments | dictsort | values %}
{% if cluster_deployment.cluster_name != 'dev' %}

{% if cluster_deployment.type in [ 'alias', 'alias2', 'simple', 'simple2' ] %}
- hosts: "cluster-{{ cluster_deployment.cluster_name }}-app:&cluster-instance-active"
  roles:

    - role: "cluster-deployment-setup"
      tags: "{{ cluster_deployment.name }}"
      cluster_deployment_name: "{{ cluster_deployment.name }}"
{% endif %}

{% if cluster_deployment.type in [ 'shared', 'shared2' ] %}
- hosts: "cluster-{{ cluster_deployment.cluster_name }}-data:&cluster-instance-active"
  roles:

    - role: "cluster-deployment-setup"
      tags: "{{ cluster_deployment.name }}"
      cluster_deployment_name: "{{ cluster_deployment.name }}"
{% endif %}

{% endif %}
{% endfor %}

# ex: et ts=2 filetype=yaml
