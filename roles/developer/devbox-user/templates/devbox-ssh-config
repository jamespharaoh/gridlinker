{{ ansible_warning ['#'] }}

{% for cluster_name, cluster in clusters.items () %}
{% if cluster_name != 'dev' %}

# ---------- cluster {{ cluster_name }}

{% if cluster_name == cluster.supercluster_name %}
Host wistla-{{ cluster_name }}-*
ForwardAgent yes
IdentityFile ~/wistla-devops/security/ssh/wistla-{{ cluster.supercluster_name }}
User ubuntu
{% endif %}

Host *.admin.{{ cluster.local_domain }}
ForwardAgent yes
IdentityFile ~/wistla-devops/security/ssh/wistla-{{ cluster.supercluster_name }}
User ubuntu

{% endif %}
{% endfor %}

{% for other_deployment_name in dev_deployment_names %}
{% set other_deployment = deployments [other_deployment_name] %}

# ---------- deployment {{ other_deployment_name }}

Host wistla-{{ other_deployment_name }}-dev
ForwardAgent yes
User vagrant

{% endfor %}

# ---------- global config

Host *
ControlPath ~/.ssh/control_%h_%p_%r
ForwardAgent no
ServerAliveInterval 10
ServerAliveCountMax 6
StrictHostKeyChecking yes
