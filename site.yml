---

# configure vagrant box

- hosts: "vagrant"
  gather_facts: "no"
  roles: [ "vagrant" ]
  tags: "vagrant"

# create template

- hosts: "template"
  gather_facts: "no"
  roles: [ "create", "template" ]
  tags: "template"

# create mongo

- hosts: "mongo-template"
  gather_facts: "no"
  roles: [ "clone", "template", "mongo" ]
  tags: "mongo"

- hosts: "mongo-host"
  gather_facts: "no"
  roles: [ "stop", "destroy", "clone", "start" ]
  tags: "mongo"

# create api

- hosts: "api-template"
  gather_facts: "no"
  roles: [ "clone", "template", "api" ]
  tags: "api"

- hosts: "api-host"
  gather_facts: "no"
  roles: [ "stop", "destroy", "clone", "start" ]
  tags: "api"

# create web

- hosts: "web-template"
  gather_facts: "no"
  roles: [ "clone", "template", "web" ]
  tags: "web"

- hosts: "web-host"
  gather_facts: "no"
  roles: [ "stop", "destroy", "clone", "start" ]
  tags: "web"
